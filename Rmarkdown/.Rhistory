values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
mutate(
Index_2010 = `Price/Volume`[Year == 2010],  # Extract 2010 Ratio as the base
Indexed_Ratio = Ratio / Index_2010   # Compute the index
)
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
mutate(Index_2010 = `Price/Volume`[Year == 2010])
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`)
View(clean_volume_price)
View(clean_volume_parallel)
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Price/Volume`[Year == 2010]) %>%
ungroup()
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = Ratio / Index_2010) %>%
ungroup()
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/Index_2010) %>%
ungroup()
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/Index_2010) %>%
ungroup() %>%
group_by(Year) %>%
mutate(
Total_Indexed_Ratio = sum(Indexed_Ratio)  # Summing Ratio_Index per Year
) %>%
ungroup()
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/Index_2010) %>%
ungroup() %>%
group_by(Year) %>%
mutate(
Total_Indexed_Ratio = sum(Indexed_Ratio)  # Summing Ratio_Index per Year
) %>%
ungroup() %>%
pivot_longer(cols = Total_Indexed_Ratio,
names_to = "Total",
values_to = Total_Indexed_Ratio)
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/Index_2010) %>%
ungroup() %>%
group_by(Year) %>%
mutate(
Total_Indexed_Ratio = sum(Indexed_Ratio)  # Summing Ratio_Index per Year
) %>%
ungroup() %>%
pivot_longer(cols = Total_Indexed_Ratio,
names_to = "Total",
values_to = "Total_Indexed_Ratio")
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/Index_2010) %>%
ungroup()
clean_total_parallel <-
clean_volume_parallel %>%
group_by(Year) %>%
mutate(
Total_Indexed_Ratio = sum(Indexed_Ratio)  # Summing Ratio_Index per Year
) %>%
ungroup()
clean_volume_parallel <-
bind_rows(clean_volume_parallel, clean_total_parallel)
View(clean_volume_parallel)
View(clean_total_parallel)
clean_volume_parallel <-
bind_rows(clean_volume_parallel, clean_total_parallel[-1])
View(clean_volume_parallel)
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/Index_2010) %>%
ungroup()
clean_total_parallel <-
clean_volume_parallel %>%
group_by(Year) %>%
mutate(
Total_Indexed_Ratio = sum(Indexed_Ratio)  # Summing Ratio_Index per Year
) %>%
ungroup()
clean_volume_parallel <-
bind_rows(clean_volume_parallel, clean_total_parallel[-1])
View(clean_volume_parallel)
View(clean_total_parallel)
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/Index_2010) %>%
ungroup()
clean_total_parallel <-
clean_volume_parallel %>%
group_by(Year) %>%
mutate(
Total_Indexed_Ratio = sum(Indexed_Ratio)  # Summing Ratio_Index per Year
) %>%
ungroup() %>%
filter(Category == "Confectionery")
clean_volume_parallel <-
bind_rows(clean_volume_parallel, clean_total_parallel[-1])
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/Index_2010) %>%
ungroup()
clean_total_parallel <-
clean_volume_parallel %>%
group_by(Year) %>%
summarize(
Category = "Total",  # Add a new Category row for the totals
Indexed_Ratio = sum(Indexed_Ratio, na.rm = TRUE),
Index_2010 = NA  # No need for base ratio for the "Total" row
) %>%
ungroup()
clean_volume_parallel <-
bind_rows(clean_volume_parallel, clean_total_parallel)
parallels_population <-
dsets[["portugal_population_growth_rate"]] %>%
filter(Year >= 1950 & Entity %in% radioBn_choice) %>%
select(-Code) %>%
rename(`Population` = Population.growth.rate) %>%
group_by(Entity)
View(parallels_population)
parallels_population <-
dsets[["portugal_population_growth_rate"]] %>%
filter(Year >= 1950 & Entity %in% radioBn_choice) %>%
select(-Code) %>%
rename(`Population` = Population.growth.rate) %>%
factor(.$Entity, levels = c("Portugal", "Italy", "Spain")) %>%
group_by(Entity)
parallels_population <-
dsets[["portugal_population_growth_rate"]] %>%
filter(Year >= 1950 & Entity %in% radioBn_choice) %>%
select(-Code) %>%
rename(`Population` = Population.growth.rate) %>%
factor(parallels_population$Entity, levels = c("Portugal", "Italy", "Spain")) %>%
group_by(Entity)
parallels_population <-
dsets[["portugal_population_growth_rate"]] %>%
filter(Year >= 1950 & Entity %in% radioBn_choice) %>%
select(-Code) %>%
rename(`Population` = Population.growth.rate)
parallels_population$Entity <-
factor(parallels_population$Entity, levels = c("Portugal", "Italy", "Spain")) %>%
group_by(Entity)
parallels_population <-
dsets[["portugal_population_growth_rate"]] %>%
filter(Year >= 1950 & Entity %in% radioBn_choice) %>%
select(-Code) %>%
rename(`Population` = Population.growth.rate)
parallels_population$Entity <-
factor(parallels_population$Entity, levels = c("Portugal", "Italy", "Spain"))
parallels_population <-
parallels_population %>%
group_by(Entity)
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Retail Volume (Tonnes)`[Year == 2010], Indexed_Ratio = `Price/Volume`/Index_2010) %>%
ungroup()
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Retail Volume (Tonnes)`[Year == 2010],
Indexed_Ratio = `Retail Volume (Tonnes)`/Index_2010) %>%
ungroup()
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(Index_2010 = `Retail Volume (Tonnes)`[Year == 2010],
Indexed_Ratio = `Retail Volume (Tonnes)`/Index_2010) %>%
ungroup()
View(clean_volume_parallel)
clean_total_parallel <-
clean_volume_parallel %>%
group_by(Year) %>%
summarize(
Category = "Total",  # Add a new Category row for the totals
Indexed_Ratio = sum(Indexed_Ratio, na.rm = TRUE),
Index_2010 = NA  # No need for base ratio for the "Total" row
) %>%
ungroup()
clean_volume_parallel <-
bind_rows(clean_volume_parallel, clean_total_parallel)
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(price_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/price_2010,
volume_2010 = `Retail Volume (Tonnes)`[Year == 2010 & Category ==
"Sweet Biscuits, Snack Bars and Fruit Snacks"]) %>%
ungroup()
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(price_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/price_2010) %>%
ungroup()
clean_total_parallel <-
clean_volume_parallel %>%
filter(Category == "Sweet Biscuits, Snack Bars and Fruit Snacks")
View(clean_total_parallel)
group_by(Year) %>%
summarize(
Category = "Total",  # Add a new Category row for the totals
Indexed_Ratio = sum(Indexed_Ratio, na.rm = TRUE),
price_2010 = NA  # No need for base ratio for the "Total" row
) %>%
ungroup()
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(price_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/price_2010) %>%
ungroup()
clean_total_parallel <-
clean_volume_parallel %>%
filter(Category == "Sweet Biscuits, Snack Bars and Fruit Snacks") %>%
mutate(volume_2010 = `Retail Volume (Tonnes)`[Year == 2010],
Indexed_Ratio = `Retail Volume (Tonnes)`/volume_2010)
clean_volume_parallel <-
bind_rows(clean_volume_parallel, clean_total_parallel)
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(price_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/price_2010) %>%
ungroup()
clean_total_parallel <-
clean_volume_parallel %>%
filter(Category == "Sweet Biscuits, Snack Bars and Fruit Snacks") %>%
mutate(volume_2010 = `Retail Volume (Tonnes)`[Year == 2010],
Indexed_Ratio = `Retail Volume (Tonnes)`/volume_2010)
clean_volume_parallel <-
xlsx_dsets[["portugal_retail_volume_price"]] %>%
filter(Geography == "Portugal") %>%
select(-Geography, -`Unit`, -`Current Constant P`)%>%
pivot_longer(
cols = c(-Category, -`Data Type`),
names_to = "Year",
values_to = "Value"
) %>%
pivot_wider(
names_from = `Data Type`,
values_from = Value
) %>%
mutate(`Price/Volume` = `Retail Value RSP` / `Retail Volume (Tonnes)`) %>%
group_by(Category) %>%
mutate(price_2010 = `Price/Volume`[Year == 2010], Indexed_Ratio = `Price/Volume`/price_2010) %>%
ungroup()
clean_total_parallel <-
clean_volume_parallel %>%
filter(Category == "Sweet Biscuits, Snack Bars and Fruit Snacks") %>%
mutate(volume_2010 = `Retail Volume (Tonnes)`[Year == 2010],
Indexed_Ratio = `Retail Volume (Tonnes)`/volume_2010) %>%
group_by(Year) %>%
summarize(
Category = "Total",  # Add a new Category row for the totals
Indexed_Ratio = sum(Indexed_Ratio, na.rm = TRUE),
price_2010 = NA  # No need for base ratio for the "Total" row
) %>%
ungroup()
clean_volume_parallel <-
bind_rows(clean_volume_parallel, clean_total_parallel)
parallels_gdp <-
dsets[["portugal_gdp_per_capita"]] %>%
filter(Year >= 1800 & Entity %in% radioBn_choice) %>%
select(-Code) %>%
rename(`GDP per capita` = GDP.per.capita..PPP..constant.2017.international...)
